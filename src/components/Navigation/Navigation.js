import React, { useState, useEffect } from 'react';
import { Link } from 'gatsby';
import axios from 'axios';

import githubStats from '../../../static/github.json';

import * as styles from './Navigation.module.scss';

export const Navigation = () => {
  const [githubCounter, setGithubCounter] = useState(githubStats.repos.reportportal);

  useEffect(() => {
    axios
      .get('https://status.reportportal.io/github/stars')
      .then((response) => response.data)
      .then((data) => setGithubCounter(data.repos.reportportal))
      .catch(console.error);
  }, []);

  return (
    <div className="sticky-wrapper">
      <header id="header" className={styles.header}>
        <div className={styles.header__wrapper}>
          <nav className={styles.navigation} aria-label="Main Navigation">
            <Link to="/" className={styles.navigation__logoLink}>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="176"
                height="40"
                viewBox="0 0 176 40"
                fill="none"
              >
                <path
                  className="logo-block"
                  d="M3.6875 23.3938L3.6875 28.4657C3.6875 28.8475 3.89868 29.2002 4.2415 29.3911L19.446 37.8568C19.7888 38.0477 20.2112 38.0477 20.554 37.8568L35.7585 29.3911C36.1013 29.2002 36.3125 28.8475 36.3125 28.4657V21.6471L20 30.7622L10.3355 25.3811L10.3355 19.6923L3.6875 23.3938Z"
                  fill="white"
                />
                <path
                  className="logo-block"
                  d="M20 9.23781L29.6645 14.6189V20.3933L36.3125 16.6918V11.5343C36.3125 11.1525 36.1013 10.7998 35.7585 10.6089L20.554 2.14316C20.2112 1.95228 19.7888 1.95228 19.446 2.14316L4.2415 10.6089C3.89869 10.7998 3.6875 11.1525 3.6875 11.5343L3.6875 18.4711L20 9.23781Z"
                  fill="white"
                />
                <path
                  className="logo-title"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M164.856 10.5V25.5619H168V10.5H164.856ZM135.532 14.641V25.562H138.676V20.406C138.676 19.364 138.938 18.5994 139.462 18.1122C139.999 17.6115 140.698 17.3611 141.558 17.3611C141.679 17.3611 141.793 17.3679 141.9 17.3814C142.008 17.3814 142.129 17.3882 142.263 17.4017V14.4787C141.242 14.4787 140.375 14.6816 139.663 15.0876C139.207 15.339 138.831 15.6681 138.535 16.075V14.641H135.532ZM128.377 25.7244C127.221 25.7244 126.193 25.4808 125.293 24.9936C124.406 24.5064 123.701 23.8433 123.177 23.0043C122.666 22.1517 122.411 21.1841 122.411 20.1015C122.411 19.0054 122.666 18.0378 123.177 17.1987C123.701 16.3462 124.406 15.6831 125.293 15.2094C126.193 14.7222 127.221 14.4787 128.377 14.4787C129.519 14.4787 130.54 14.7222 131.44 15.2094C132.341 15.6831 133.046 16.3394 133.557 17.1784C134.067 18.0175 134.322 18.9918 134.322 20.1015C134.322 21.1841 134.067 22.1517 133.557 23.0043C133.046 23.8433 132.341 24.5064 131.44 24.9936C130.54 25.4808 129.519 25.7244 128.377 25.7244ZM128.377 23.1261C128.901 23.1261 129.371 23.0043 129.788 22.7607C130.204 22.5171 130.533 22.172 130.775 21.7254C131.017 21.2653 131.138 20.724 131.138 20.1015C131.138 19.4655 131.017 18.9242 130.775 18.4776C130.533 18.031 130.204 17.6859 129.788 17.4423C129.371 17.1987 128.901 17.0769 128.377 17.0769C127.853 17.0769 127.383 17.1987 126.966 17.4423C126.55 17.6859 126.214 18.031 125.958 18.4776C125.716 18.9242 125.596 19.4655 125.596 20.1015C125.596 20.724 125.716 21.2653 125.958 21.7254C126.214 22.172 126.55 22.5171 126.966 22.7607C127.383 23.0043 127.853 23.1261 128.377 23.1261ZM114.007 25.1154C114.692 25.5214 115.491 25.7244 116.405 25.7244C117.426 25.7244 118.34 25.4943 119.146 25.0342C119.966 24.5741 120.611 23.9245 121.081 23.0855C121.565 22.2464 121.807 21.2518 121.807 20.1015C121.807 18.9648 121.565 17.9769 121.081 17.1378C120.611 16.2988 119.966 15.6492 119.146 15.1891C118.34 14.7155 117.426 14.4787 116.405 14.4787C115.451 14.4787 114.632 14.6816 113.946 15.0876C113.586 15.3011 113.27 15.5726 112.999 15.9021V14.641H109.996V29.5H113.14V24.4057C113.396 24.6884 113.685 24.925 114.007 25.1154ZM117.252 22.7607C116.849 23.0043 116.385 23.1261 115.861 23.1261C115.337 23.1261 114.867 23.0043 114.45 22.7607C114.034 22.5171 113.704 22.172 113.463 21.7254C113.221 21.2653 113.1 20.724 113.1 20.1015C113.1 19.4655 113.221 18.9242 113.463 18.4776C113.704 18.031 114.034 17.6859 114.45 17.4423C114.867 17.1987 115.337 17.0769 115.861 17.0769C116.385 17.0769 116.849 17.1987 117.252 17.4423C117.668 17.6859 117.997 18.031 118.239 18.4776C118.494 18.9242 118.622 19.4655 118.622 20.1015C118.622 20.724 118.494 21.2653 118.239 21.7254C117.997 22.172 117.668 22.5171 117.252 22.7607ZM156.271 25.7244C157.184 25.7244 157.984 25.5214 158.669 25.1154C158.99 24.925 159.279 24.6884 159.536 24.4057V25.5721H162.68V14.641H159.677V15.9021C159.406 15.5726 159.09 15.3011 158.73 15.0876C158.044 14.6816 157.225 14.4787 156.271 14.4787C155.25 14.4787 154.336 14.7155 153.53 15.1891C152.71 15.6492 152.065 16.2988 151.595 17.1378C151.111 17.9769 150.869 18.9648 150.869 20.1015C150.869 21.2518 151.111 22.2464 151.595 23.0855C152.065 23.9245 152.71 24.5741 153.53 25.0342C154.336 25.4943 155.25 25.7244 156.271 25.7244ZM156.815 23.1261C156.291 23.1261 155.827 23.0043 155.424 22.7607C155.008 22.5171 154.678 22.172 154.437 21.7254C154.181 21.2653 154.054 20.724 154.054 20.1015C154.054 19.4655 154.181 18.9242 154.437 18.4776C154.678 18.031 155.008 17.6859 155.424 17.4423C155.827 17.1987 156.291 17.0769 156.815 17.0769C157.339 17.0769 157.809 17.1987 158.226 17.4423C158.642 17.6859 158.971 18.031 159.213 18.4776C159.455 18.9242 159.576 19.4655 159.576 20.1015C159.576 20.724 159.455 21.2653 159.213 21.7254C158.971 22.172 158.642 22.5171 158.226 22.7607C157.809 23.0043 157.339 23.1261 156.815 23.1261ZM72.1048 25.1154C72.79 25.5214 73.5895 25.7244 74.5032 25.7244C75.5243 25.7244 76.438 25.4943 77.2442 25.0342C78.0638 24.5741 78.7087 23.9245 79.179 23.0855C79.6627 22.2464 79.9046 21.2518 79.9046 20.1015C79.9046 18.9648 79.6627 17.9769 79.179 17.1378C78.7087 16.2988 78.0638 15.6492 77.2442 15.1891C76.438 14.7155 75.5243 14.4787 74.5032 14.4787C73.5492 14.4787 72.7295 14.6816 72.0443 15.0876C71.684 15.3011 71.3682 15.5726 71.097 15.9021V14.641H68.094V29.5H71.2381V24.4057C71.4945 24.6884 71.7834 24.925 72.1048 25.1154ZM75.3496 22.7607C74.9466 23.0043 74.483 23.1261 73.959 23.1261C73.435 23.1261 72.9647 23.0043 72.5482 22.7607C72.1316 22.5171 71.8024 22.172 71.5606 21.7254C71.3187 21.2653 71.1978 20.724 71.1978 20.1015C71.1978 19.4655 71.3187 18.9242 71.5606 18.4776C71.8024 18.031 72.1316 17.6859 72.5482 17.4423C72.9647 17.1987 73.435 17.0769 73.959 17.0769C74.483 17.0769 74.9466 17.1987 75.3496 17.4423C75.7662 17.6859 76.0954 18.031 76.3372 18.4776C76.5925 18.9242 76.7202 19.4655 76.7202 20.1015C76.7202 20.724 76.5925 21.2653 76.3372 21.7254C76.0954 22.172 75.7662 22.5171 75.3496 22.7607ZM105.743 25.7243C104.466 25.7243 103.472 25.3995 102.76 24.75C102.048 24.0869 101.692 23.1057 101.692 21.8066V17.4017V14.9658V12.2254H104.836V14.9658H108.343V17.4017H104.836V21.766C104.836 22.2261 104.957 22.5847 105.199 22.8419C105.44 23.0854 105.77 23.2072 106.186 23.2072H108.343V25.7243H105.743ZM144.641 24.75C145.354 25.3995 146.348 25.7243 147.624 25.7243H150.224V23.2072H148.068C147.651 23.2072 147.322 23.0854 147.08 22.8419C146.838 22.5847 146.717 22.2261 146.717 21.766V17.4017H150.224V14.9658H146.717V12.2254H143.573V14.9658V17.4017V21.8066C143.573 23.1057 143.929 24.0869 144.641 24.75ZM93.65 25.562V14.641H96.653V16.075C96.9493 15.6681 97.3255 15.339 97.7817 15.0876C98.4938 14.6816 99.3604 14.4787 100.382 14.4787V17.4017C100.247 17.3882 100.126 17.3814 100.019 17.3814C99.9113 17.3679 99.7971 17.3611 99.6762 17.3611C98.8162 17.3611 98.1176 17.6115 97.5801 18.1122C97.0561 18.5994 96.7941 19.364 96.7941 20.406V25.562H93.65ZM83.3942 24.9936C84.2944 25.4808 85.3223 25.7244 86.4778 25.7244C87.6199 25.7244 88.6411 25.4808 89.5413 24.9936C90.4415 24.5064 91.147 23.8433 91.6575 23.0043C92.1681 22.1517 92.4234 21.1841 92.4234 20.1015C92.4234 18.9918 92.1681 18.0175 91.6575 17.1784C91.147 16.3394 90.4415 15.6831 89.5413 15.2094C88.6411 14.7222 87.6199 14.4787 86.4778 14.4787C85.3223 14.4787 84.2944 14.7222 83.3942 15.2094C82.5074 15.6831 81.802 16.3462 81.2779 17.1987C80.7674 18.0378 80.5121 19.0054 80.5121 20.1015C80.5121 21.1841 80.7674 22.1517 81.2779 23.0043C81.802 23.8433 82.5074 24.5064 83.3942 24.9936ZM87.8886 22.7607C87.4721 23.0043 87.0018 23.1261 86.4778 23.1261C85.9538 23.1261 85.4835 23.0043 85.067 22.7607C84.6505 22.5171 84.3146 22.172 84.0593 21.7254C83.8174 21.2653 83.6965 20.724 83.6965 20.1015C83.6965 19.4655 83.8174 18.9242 84.0593 18.4776C84.3146 18.031 84.6505 17.6859 85.067 17.4423C85.4835 17.1987 85.9538 17.0769 86.4778 17.0769C87.0018 17.0769 87.4721 17.1987 87.8886 17.4423C88.3052 17.6859 88.6344 18.031 88.8762 18.4776C89.1181 18.9242 89.239 19.4655 89.239 20.1015C89.239 20.724 89.1181 21.2653 88.8762 21.7254C88.6344 22.172 88.3052 22.5171 87.8886 22.7607ZM61.4607 25.7244C60.2245 25.7244 59.1362 25.4808 58.1956 24.9936C57.2685 24.5064 56.5497 23.8433 56.0391 23.0043C55.5285 22.1517 55.2732 21.1841 55.2732 20.1015C55.2732 19.0054 55.5218 18.0378 56.0189 17.1987C56.5295 16.3462 57.2215 15.6831 58.0949 15.2094C58.9682 14.7222 59.9558 14.4787 61.0576 14.4787C62.119 14.4787 63.073 14.7087 63.9195 15.1688C64.7795 15.6154 65.458 16.265 65.9551 17.1175C66.4523 17.9566 66.7009 18.9648 66.7009 20.1421C66.7009 20.2639 66.6941 20.406 66.6807 20.5684C66.6673 20.7172 66.6538 20.8593 66.6404 20.9947H58.4363C58.4996 21.2854 58.6008 21.556 58.7398 21.8066C59.0085 22.2532 59.378 22.5983 59.8483 22.8419C60.332 23.0719 60.8963 23.187 61.5413 23.187C62.119 23.187 62.6229 23.099 63.0529 22.9231C63.4963 22.7472 63.8994 22.4833 64.2621 22.1314L65.935 23.9583C65.4378 24.5267 64.813 24.9665 64.0606 25.2778C63.3082 25.5755 62.4415 25.7244 61.4607 25.7244ZM58.6995 18.234C58.5521 18.5047 58.4523 18.8092 58.4 19.1474H63.7397C63.6887 18.8034 63.5874 18.4922 63.4358 18.2137C63.2074 17.7942 62.8916 17.4694 62.4886 17.2393C62.0855 16.9957 61.6152 16.8739 61.0777 16.8739C60.5403 16.8739 60.0633 16.9957 59.6468 17.2393C59.2437 17.4694 58.9279 17.8009 58.6995 18.234ZM51.003 16.075C51.2993 15.6681 51.6755 15.339 52.1317 15.0876C52.8438 14.6816 53.7105 14.4787 54.7316 14.4787V17.4017C54.5973 17.3882 54.4763 17.3814 54.3688 17.3814C54.2614 17.3679 54.1471 17.3611 54.0262 17.3611C53.1663 17.3611 52.4676 17.6115 51.9301 18.1122C51.4061 18.5994 51.1441 19.364 51.1441 20.406V25.562H48V14.641H51.003V16.075Z"
                  fill="white"
                />
              </svg>
            </Link>
            <ul id="navigation" className={styles.navigation__list} role="list">
              <li>
                <button
                  className={styles.navigation__link}
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="#product-menu"
                >
                  <span className="navigation__link-child">Product</span>
                  <span className={styles.navigation__arrow}>
                    <svg
                      width="10"
                      height="7"
                      viewBox="0 0 10 7"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M1 1L5 5L9 1" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                  </span>
                </button>
              </li>

              <li>
                <button
                  className={styles.navigation__link}
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="#solutions-menu"
                >
                  <span className="navigation__link-child">Solutions</span>
                  <span className={styles.navigation__arrow}>
                    <svg
                      width="10"
                      height="7"
                      viewBox="0 0 10 7"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M1 1L5 5L9 1" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                  </span>
                </button>
              </li>

              <li>
                <button
                  className={styles.navigation__link}
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="#offerings-menu"
                >
                  <span className="navigation__link-child">Offerings</span>
                  <span className={styles.navigation__arrow}>
                    <svg
                      width="10"
                      height="7"
                      viewBox="0 0 10 7"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M1 1L5 5L9 1" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                  </span>
                </button>
              </li>

              <li>
                <button
                  className={styles.navigation__link}
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="#learn-menu"
                >
                  <span className="navigation__link-child">Learn</span>
                  <span className={styles.navigation__arrow}>
                    <svg
                      width="10"
                      height="7"
                      viewBox="0 0 10 7"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M1 1L5 5L9 1" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                  </span>
                </button>
              </li>

              <li>
                <button
                  className={styles.navigation__link}
                  type="button"
                  aria-haspopup="true"
                  aria-expanded="false"
                  aria-controls="#community-menu"
                >
                  <span className="navigation__link-child">Community</span>
                  <span className={styles.navigation__arrow}>
                    <svg
                      width="10"
                      height="7"
                      viewBox="0 0 10 7"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path d="M1 1L5 5L9 1" stroke-width="2" stroke-linecap="round"></path>
                    </svg>
                  </span>
                </button>
              </li>
            </ul>

            <div className={styles.navigation__actions}>
              <a
                href="https://github.com/reportportal/reportportal.github.io"
                className={styles.navigation__github}
              >
                <svg
                  className={styles.github}
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M11.9989 0C5.37328 0 0 5.50853 0 12.3041C0 17.7393 3.43804 22.3513 8.20651 23.979C8.8069 24.0915 9.02569 23.7116 9.02569 23.3853C9.02569 23.093 9.01538 22.3195 9.00949 21.2931C5.67163 22.0363 4.96738 19.6435 4.96738 19.6435C4.4215 18.222 3.63474 17.8435 3.63474 17.8435C2.5452 17.0807 3.71725 17.0958 3.71725 17.0958C4.9217 17.1827 5.55524 18.364 5.55524 18.364C6.62562 20.2439 8.36417 19.7009 9.0478 19.3859C9.15682 18.5913 9.46696 18.049 9.80951 17.7416C7.14497 17.4304 4.34342 16.3752 4.34342 11.6606C4.34342 10.3169 4.8112 9.21939 5.57882 8.35908C5.45505 8.0479 5.04325 6.79707 5.69668 5.1029C5.69668 5.1029 6.7037 4.77207 8.99622 6.36352C9.95316 6.09085 10.9801 5.95489 12.0004 5.94961C13.0199 5.95489 14.0461 6.09085 15.0045 6.36352C17.2956 4.77207 18.3011 5.1029 18.3011 5.1029C18.956 6.79707 18.5442 8.0479 18.4212 8.35908C19.1903 9.21939 19.6544 10.3169 19.6544 11.6606C19.6544 16.3873 16.8484 17.4274 14.1758 17.7318C14.606 18.1117 14.9898 18.8625 14.9898 20.0105C14.9898 21.6549 14.975 22.9819 14.975 23.3853C14.975 23.7146 15.1916 24.0975 15.8001 23.9774C20.5649 22.3467 24 17.7386 24 12.3041C24 5.50853 18.6267 0 11.9989 0Z"
                    fill="#EDEFF7"
                  />
                </svg>

                <span className={styles.navigation__githubValue}>
                  <svg
                    className={styles.star}
                    xmlns="http://www.w3.org/2000/svg"
                    width="12"
                    height="12"
                    viewBox="0 0 12 12"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M4.76473 4.72775L5.9091 1.01975C5.92327 0.973848 5.96345 0.951484 6.00296 0.952658C6.0405 0.953774 6.07744 0.976138 6.0909 1.01975L7.23527 4.72775H10.9514C11.0424 4.72775 11.0815 4.8434 11.0092 4.89871L7.99871 7.20145L9.1461 10.9192C9.17344 11.0078 9.07105 11.0794 8.99744 11.0231L6 8.73028L3.00256 11.0231C2.92895 11.0794 2.82656 11.0078 2.85391 10.9192L4.00129 7.20145L0.990824 4.89871C0.918507 4.8434 0.957576 4.72775 1.04858 4.72775H4.76473ZM2.89637 7.55506L0.413267 5.65571C-0.382228 5.04723 0.0475435 3.77514 1.04858 3.77514H4.06294L5.00012 0.738499C5.30401 -0.24617 6.696 -0.246162 6.99989 0.738499L7.93706 3.77514H10.9514C11.9525 3.77514 12.3822 5.04724 11.5867 5.65571L9.10363 7.55506L10.0551 10.638C10.3559 11.6127 9.22958 12.3994 8.41988 11.7801L6 9.92906L3.58012 11.7801C2.77042 12.3994 1.64409 11.6127 1.94492 10.638L2.89637 7.55506Z"
                      fill="#EDEFF7"
                    />
                  </svg>
                  {githubCounter}
                </span>
              </a>

              <div className="navigation__auth">
                <div className="navigation__auth-button-group">
                  <a className={styles.loginButton} href="#">
                    Log in
                  </a>
                  <a className={styles.signupButton} href="#">
                    Sign up
                  </a>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>
    </div>
  );
};
