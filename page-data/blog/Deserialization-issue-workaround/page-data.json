{"componentChunkName":"component---src-templates-blog-post-blog-post-tsx","path":"/blog/Deserialization-issue-workaround","result":{"data":{"contentfulBlogPost":{"id":"14d869b2-fd5b-5439-aa55-0ce0022eb505","slug":"Deserialization-issue-workaround","industry":"Product","title":{"title":"Deserialization issue workaround"},"seoTitle":null,"seoDescription":"Use the recommended settings in the Docker Compose file to prevent any deserialization issues.","featuredImage":{"file":{"url":"//images.ctfassets.net/1n1nntnzoxp4/3DHvdns0eyniI6qPnrckE3/b24dc5f1ce7668dbc16f65ac36445d3f/Deserialization.svg"}},"date":"September 16, 2023","author":"ReportPortal Team","articleBody":{"raw":"{\"nodeType\":\"document\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We would like to highlight that in version 5.7.5 of API Service and Authorization Service we have updated the dependencies.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Unfortunately, the same dependency found its way into different versions, causing a Java error that looks like this: \\\"AuthUtils$SerialUidReplacingInputStream: Potentially Fatal Deserialization Operation\\\" when serializing/deserializing a user class or token.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"blockquote\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Note 1\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"This issue has already been fixed in \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://reportportal.io/docs/releases/Version23.2\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"version 23.2\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Example of a stack trace from logs:\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"blueBg \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"AuthUtils$SerialUidReplacingInputStream : Potentially Fatal Deserialization Operation.\",\"marks\":[{\"type\":\"italic\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"\\n\\njava.io.InvalidClassException: Overriding serialized class version mismatch: local serialVersionUID = 550 stream serialVersionUID = 520 \\nat com.epam.ta.reportportal.auth.util.AuthUtils$SerialUidReplacingInputStream.readClassDescriptor(AuthUtils.java:105) \\nat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1992) \\nat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1870) \\nat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2201) \\nat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1687) \\nat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:489) \\nat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:447) \\nat java.base/java.util.TreeSet.readObject(TreeSet.java:524) \\nat java.base/jdk.internal.reflect.GeneratedMethodAccessor226.invoke(Unknown Source) \\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Everything is functioning well; however, since users are verified for all requests, including reporting, many errors are filling up the Service API log. To prevent this log from excessively cluttering the Docker, additional logging rules need to be configured in Docker's configuration.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We recommend using the following settings in the Docker compose file for the ReportPortal services containers:\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"5IaEMQgny0x2KzRGQnZaC6\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Please make sure, that you configured the default logging driver by adding the following values to the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/etc/docker/daemon.json (create this file if it doesn’t exist):\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"4pvFxCse0nwrptUwJAZM4J\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://gist.githubusercontent.com/ykyuen/d07d83481c24e9b7ae2d1604157e131a/raw/c23c846d54a19ef28c1c61cf6a381772dae192c4/daemon.json\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Here is the link to the raw version for a quick copy.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"blockquote\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Note 2\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"This is a default recommendation from Docker, and you may need to adjust it to fit your project's specific requirements.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"If your installation is via Kubernetes, you don't need to worry about log rotation because Kubernetes already has it configured by default. However, Docker doesn't have log rotation enabled by default, and its JSON log format can quickly consume all available space.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We plan to update Docker compose in the future, so these log settings will be included in the compose file automatically. Until then, if you are using version 5.7.5 or 23.1 with Docker installed, please check how much space the logs are occupying and update the Docker compose file accordingly.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Default paths for checking logs: \",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Linux:\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" /var/lib/docker/containers/ \",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Windows:\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" path depends on the way you’ve installed Docker. Please, check \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://docs.docker.com/desktop/troubleshoot/overview/#check-the-logs\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Docker documentation\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]}]}","references":[{"contentful_id":"5IaEMQgny0x2KzRGQnZaC6","__typename":"ContentfulAsset","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=173&h=130&q=50&fm=webp 173w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=345&h=259&q=50&fm=webp 345w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=690&h=518&q=50&fm=webp 690w","sizes":"(min-width: 690px) 690px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=690&h=518&q=50&fm=png","srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=173&h=130&q=50&fm=png 173w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=345&h=259&q=50&fm=png 345w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/c86481862ba7d146f55ec4eb52881bf0/image-2023-10-24-01-21-41-672.png?w=690&h=518&q=50&fm=png 690w","sizes":"(min-width: 690px) 690px, 100vw"}},"layout":"constrained","backgroundColor":"#181818","width":690,"height":518},"description":"Settings in the Docker compose file"},{"contentful_id":"4pvFxCse0nwrptUwJAZM4J","__typename":"ContentfulAsset","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=135&h=66&q=50&fm=webp 135w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=269&h=132&q=50&fm=webp 269w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=538&h=264&q=50&fm=webp 538w","sizes":"(min-width: 538px) 538px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=538&h=264&q=50&fm=png","srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=135&h=66&q=50&fm=png 135w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=269&h=132&q=50&fm=png 269w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/4pvFxCse0nwrptUwJAZM4J/6aa218bfe910809b69e1e88f3041b1b3/daemon.json.png?w=538&h=264&q=50&fm=png 538w","sizes":"(min-width: 538px) 538px, 100vw"}},"layout":"constrained","backgroundColor":"#181818","width":538,"height":264},"description":"/etc/docker/daemon.json file"}]}}},"pageContext":{"slug":"Deserialization-issue-workaround"}},"staticQueryHashes":["1130895138","2991584196","3617663447"],"slicesMap":{}}