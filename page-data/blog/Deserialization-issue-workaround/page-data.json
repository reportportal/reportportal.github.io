{"componentChunkName":"component---src-templates-blog-post-blog-post-js","path":"/blog/Deserialization-issue-workaround","result":{"data":{"contentfulBlogPost":{"id":"14d869b2-fd5b-5439-aa55-0ce0022eb505","slug":"Deserialization-issue-workaround","industry":"Product","title":{"title":"Deserialization issue workaround"},"date":"September 16, 2023","author":"ReportPortal Team","articleBody":{"raw":"{\"nodeType\":\"document\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We would like to highlight that in version 5.7.5 of API Service and Authorization Service we have updated the dependencies.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Unfortunately, the same dependency found its way into different versions, causing a Java error that looks like this: \\\"AuthUtils$SerialUidReplacingInputStream: Potentially Fatal Deserialization Operation\\\" when serializing/deserializing a user class or token.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Example of a stack trace from logs:\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"blueBg \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"AuthUtils$SerialUidReplacingInputStream : Potentially Fatal Deserialization Operation.\",\"marks\":[{\"type\":\"italic\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"\\r\\n\\r\\njava.io.InvalidClassException: Overriding serialized class version mismatch: local serialVersionUID = 550 stream serialVersionUID = 520 \\r\\nat com.epam.ta.reportportal.auth.util.AuthUtils$SerialUidReplacingInputStream.readClassDescriptor(AuthUtils.java:105) \\r\\nat java.base/java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1992) \\r\\nat java.base/java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1870) \\r\\nat java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2201) \\r\\nat java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1687) \\r\\nat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:489) \\r\\nat java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:447) \\r\\nat java.base/java.util.TreeSet.readObject(TreeSet.java:524) \\r\\nat java.base/jdk.internal.reflect.GeneratedMethodAccessor226.invoke(Unknown Source) \\r\\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Everything is functioning well; however, since users are verified for all requests, including reporting, many errors are filling up the Service API log. To prevent this log from excessively cluttering the Docker, additional logging rules need to be configured in Docker's configuration.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We recommend using the following settings in the Docker compose file for the ReportPortal services containers:\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"5IaEMQgny0x2KzRGQnZaC6\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"blockquote\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Note 1\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"This is a default recommendation from Docker, and you may need to adjust it to fit your project's specific requirements.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"If your installation is via Kubernetes, you don't need to worry about log rotation because Kubernetes already has it configured by default. However, Docker doesn't have log rotation enabled by default, and its JSON log format can quickly consume all available space.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We plan to update Docker compose in the future, so these log settings will be included in the compose file automatically. Until then, if you are using version 5.7.5 or 23.1 with Docker installed, please check how much space the logs are occupying and update the Docker compose file accordingly.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Default paths for checking logs: \",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Linux:\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" /var/lib/docker/containers/ \",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Windows:\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" path depends on the way youâ€™ve installed Docker. Please, check \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://docs.docker.com/desktop/troubleshoot/overview/#check-the-logs\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Docker documentation\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\".\\r\\r\\n\\r\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]}]}","references":[{"contentful_id":"5IaEMQgny0x2KzRGQnZaC6","__typename":"ContentfulAsset","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=396&h=258&q=50&fm=webp 396w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=791&h=515&q=50&fm=webp 791w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=1582&h=1030&q=50&fm=webp 1582w","sizes":"(min-width: 1582px) 1582px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=1582&h=1030&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=396&h=258&fl=progressive&q=50&fm=jpg 396w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=791&h=515&fl=progressive&q=50&fm=jpg 791w,\nhttps://images.ctfassets.net/1n1nntnzoxp4/5IaEMQgny0x2KzRGQnZaC6/a031acfb7df038e87fa54830a71ff67e/ReportPortalContainer.jpg?w=1582&h=1030&fl=progressive&q=50&fm=jpg 1582w","sizes":"(min-width: 1582px) 1582px, 100vw"}},"layout":"constrained","backgroundColor":"#181818","width":1582,"height":1030}}]}}},"pageContext":{"slug":"Deserialization-issue-workaround"}},"staticQueryHashes":["1800307753","3810076356"],"slicesMap":{}}